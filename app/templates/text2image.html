{% extends "base.html" %}

{% block title %}文生图功能 - Paper Pi{% endblock %}
{% block nav_text2image %}active{% endblock %}

{% block content %}
<main class="main">
    <section class="text2image-container reveal" style="--i: 1;">
        <div class="text2image-header">
            <h3>文生图功能</h3>
            <p class="description">输入图片描述，生成图像并自动入库。</p>
        </div>

        <div class="text2image-form panel-card">
            <form id="text2image-form">
                <div class="form-group">
                    <label for="prompt">图片描述</label>
                    <textarea id="prompt" name="prompt" placeholder="请输入图片描述，例如：一只可爱的小猫在阳光下睡觉"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">生成图片</button>
            </form>
        </div>

        <div class="text2image-result panel-card" id="result-container" style="display: none;">
            <h4>生成结果</h4>
            <div id="loading" style="display: none;">
                <div class="loading"></div>
            </div>
            <div id="error" class="error" style="display: none;"></div>
            <div id="result-content" style="display: none;">
                <div class="result-image">
                    <img id="result-image" src="" alt="生成的图片">
                </div>
                <div class="result-info">
                    <p id="result-path">保存路径：</p>
                    <p id="result-library">图片库：未保存</p>
                    <p id="result-time">生成时间：</p>
                    <button id="preview-on-epaper" class="btn btn-primary" type="button">墨水屏预览</button>
                </div>
                <div id="preview-status" class="preview-status" style="display: none;"></div>
            </div>
        </div>
    </section>
</main>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/text2image.js') }}"></script>
{% endblock %}
